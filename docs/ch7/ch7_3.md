## 7.3 凸优化
$$
\theta x + (1-\theta)y \in \mathcal{C}. \tag{7.29}
$$
$$
f(\theta \boldsymbol{x} + (1-\theta)\boldsymbol{y}) \leqslant \theta f(\boldsymbol{x}) + (1-\theta)f(\boldsymbol{y}). \tag{7.30}
$$
$$
f(\boldsymbol{y}) \geqslant f(\boldsymbol{x}) + \nabla_{\boldsymbol{x}}f(\boldsymbol{x})^{\top}(\boldsymbol{y} - \boldsymbol{x}). \tag{7.31}
$$
$$
\nabla_{x}\log(x\log_{2}x) = 1 \cdot \log_{2}x + x \cdot \frac{1}{x\log_{e}2} = \log_{2}x + \frac{1}{\log_{e}2}. \tag{7.32}
$$
$$
\begin{align}
f(\boldsymbol{x}) + \nabla_{\boldsymbol{x}}^{\top}(\boldsymbol{y} - \boldsymbol{x}) &= f(2) + \nabla f(2) \cdot (4 - 2) \tag{7.33a}\\
&= 2 + \left( 1 + \frac{1}{\log_{e}2} \right) \cdot 2 \approx \frac{6}{9} \tag{7.33b}
\end{align}
$$
$$
\begin{align}
f_{1}(\theta \boldsymbol{x} + (1 - \theta)\boldsymbol{y}) &\leqslant \theta f_{1}(\boldsymbol{x}) + (1-\theta)f_{1}(\boldsymbol{y}) \tag{7.34}\\
f_{2}(\theta \boldsymbol{x} + (1 - \theta)\boldsymbol{y}) &\leqslant \theta f_{2}(\boldsymbol{x}) + (1-\theta)f_{2}(\boldsymbol{y}). \tag{7.35}
\end{align}
$$
$$
\begin{align}
f_{1}(\theta \boldsymbol{x} &+ (1 - \theta)\boldsymbol{y}) + f_{2}(\theta \boldsymbol{x} + (1 - \theta)\boldsymbol{y}) \\ &\leqslant \theta f_{1}(\boldsymbol{x}) + (1-\theta)f_{1}(\boldsymbol{y}) + \theta f_{2}(\boldsymbol{x}) + (1-\theta)f_{2}(\boldsymbol{y}) 
\end{align}\tag{7.36}
$$
$$
\theta \Big[ f_{1}(\boldsymbol{x}) + f_{2}(\boldsymbol{x}) \Big] + (1-\theta)\Big[ f_{1}(\boldsymbol{y}) + f_{2}(\boldsymbol{y}) \Big] , \tag{7.37}
$$
$$
\begin{align}
\min\limits_{\boldsymbol{x}}~&~f(\boldsymbol{x})\\
\text{subject to}~&~g_{i}(\boldsymbol{x}) \leqslant 0\quad \forall i = 1, \dots, m\\
&~h_{j}(\boldsymbol{x}) = 0\quad \forall j = 1, \dots, n,
\end{align}\tag{7.38}
$$

### 7.3.1 线性规划
$$
\begin{align}
\min\limits_{\boldsymbol{x} \in \mathbb{R}^{d}}~&~\boldsymbol{c}^{\top}\boldsymbol{x}\\
\text{subject to}~&~\boldsymbol{A}\boldsymbol{x} \leqslant \boldsymbol{b},
\end{align}\tag{7.39}
$$
$$
\mathfrak{L}(\boldsymbol{x}, \boldsymbol{\lambda}) = \boldsymbol{c}^{\top}\boldsymbol{x} + \boldsymbol{\lambda}^{\top}(\boldsymbol{A}\boldsymbol{x} - \boldsymbol{b}), \tag{7.40}
$$
$$
\mathfrak{L}(\boldsymbol{x}, \boldsymbol{\lambda}) = (\boldsymbol{c} + \boldsymbol{A}^{\top}\boldsymbol{\lambda})^{\top}\boldsymbol{x} - \boldsymbol{\lambda}^{\top}\boldsymbol{b}. \tag{7.41}
$$
$$
\boldsymbol{c} + \boldsymbol{A}^{\top}\boldsymbol{\lambda} = \boldsymbol{0}. \tag{7.42}
$$
$$
\begin{align}
\max\limits_{\boldsymbol{\lambda} \in \mathbb{R}^{m}}~&~-\boldsymbol{b}^{\top}\boldsymbol{\lambda}\\
\text{subject to}~&~\boldsymbol{c} + \boldsymbol{A}^{\top}\boldsymbol{\lambda} = \boldsymbol{0}\\
&~\boldsymbol{\lambda} \geqslant \boldsymbol{0}
\end{align} \tag{7.43}
$$
$$
\begin{align}
\min\limits_{\boldsymbol{x} \in \mathbb{R}^{2}}~&~\begin{bmatrix}
5\\3
\end{bmatrix}^{\top}\begin{bmatrix}
x_{1}\\x_{2}
\end{bmatrix}\\[0.5em]
\text{subject to}~&~\begin{bmatrix}
2&2\\2&-4\\-2&1\\0&-1\\0&1
\end{bmatrix}\begin{bmatrix}
x_{1}\\x_{2}
\end{bmatrix} \leqslant \begin{bmatrix}
33\\8\\5\\-1\\8
\end{bmatrix}
\end{align} \tag{7.44}
$$

### 7.3.2 二次规划
$$
\begin{align}
\min\limits_{\boldsymbol{x} \in \mathbb{R}^{d}}~&~ \frac{1}{2}\boldsymbol{x}^{\top}\boldsymbol{Q}\boldsymbol{x} + \boldsymbol{c}^{\top}\boldsymbol{x}\\
\text{subject to}~&~\boldsymbol{A}\boldsymbol{x} \leqslant \boldsymbol{b},
\end{align}\tag{7.45}
$$
$$
\begin{align}
\min\limits_{\boldsymbol{x}\in \mathbb{R}^{2}}~&~ \frac{1}{2}\begin{bmatrix}
x_{1}\\x_{2}
\end{bmatrix}^{\top}\begin{bmatrix}
2&1\\1&4
\end{bmatrix}\begin{bmatrix}
x_{1}\\x_{2}
\end{bmatrix} + \begin{bmatrix}
5\\3
\end{bmatrix}^{\top}\begin{bmatrix}
x_{1}\\x_{2}
\end{bmatrix}\tag{7.46}\\
\text{subject to}~&~\begin{bmatrix}
1&0\\-1&0\\0&1\\0&-1
\end{bmatrix}\begin{bmatrix}
x_{1}\\x_{2}
\end{bmatrix} \leqslant \begin{bmatrix}
1\\1\\1\\1
\end{bmatrix}\tag{7.47}
\end{align}
$$
$$
\begin{align}
\mathfrak{L}(\boldsymbol{x}, \boldsymbol{\lambda}) &= \frac{1}{2}\boldsymbol{x}^{\top}\boldsymbol{Q}\boldsymbol{x} + \boldsymbol{c}^{\top}\boldsymbol{x} + \boldsymbol{\lambda}^{\top}(\boldsymbol{A}\boldsymbol{x} - \boldsymbol{b}) \tag{7.48a}\\
&= \frac{1}{2}\boldsymbol{x}^{\top}\boldsymbol{Q}\boldsymbol{x} + (\boldsymbol{c} + \boldsymbol{A}^{\top}\boldsymbol{\lambda})^{\top}\boldsymbol{x} - \boldsymbol{\lambda}^{\top}\boldsymbol{b}, \tag{7.48b}
\end{align}
$$
$$
\boldsymbol{Q}\boldsymbol{x} + (\boldsymbol{c} + \boldsymbol{A}^{\top}\boldsymbol{\lambda}) = \boldsymbol{0}. \tag{7.49}
$$
$$
\boldsymbol{x} = -\boldsymbol{Q}^{-1}(\boldsymbol{c} + \boldsymbol{A}^{\top}\boldsymbol{\lambda}). \tag{7.50}
$$
$$
\mathfrak{D}(\boldsymbol{\lambda}) = \frac{1}{2}(\boldsymbol{c} + \boldsymbol{A}^{\top}\boldsymbol{\lambda})^{\top}\boldsymbol{Q}^{-1}(\boldsymbol{c} + \boldsymbol{A}^{\top}\boldsymbol{\lambda}) - \boldsymbol{\lambda}^{\top}\boldsymbol{b}. \tag{7.51}
$$
$$
\begin{align}
\max\limits_{\boldsymbol{\lambda} \in \mathbb{R}^{m}}~&~ \frac{1}{2}(\boldsymbol{c} + \boldsymbol{A}^{\top}\boldsymbol{\lambda})^{\top}\boldsymbol{Q}^{-1}(\boldsymbol{c} + \boldsymbol{A}^{\top}\boldsymbol{\lambda}) - \boldsymbol{\lambda}^{\top}\boldsymbol{b}\\
\text{subject to}~&~ \boldsymbol{\lambda} \geqslant \boldsymbol{0}.
\end{align} \tag{7.52}
$$

### 7.3.3 Legendre-Fenchel 变换和凸共轭
$$
f^{*}(\boldsymbol{s}) = \sup_{\boldsymbol{x} \in \mathbb{R}^{D}} \Big[ \left\langle \boldsymbol{s}, \boldsymbol{x} \right\rangle - f(\boldsymbol{x}) \Big] . \tag{7.53}
$$
$$
y - f(x_{0}) = s(x - x_{0}). \tag{7.54}
$$
$$
\inf_{x_{0}} \Big[ -sx_{0} + f(x_{0}) \Big]. \tag{7.55} 
$$
$$
f(x_{0}) = sx_{0} + c. \tag{7.56}
$$
$$
-c = sx_{0} - f(x_{0}). \tag{7.57}
$$
$$
f^{*}(s) \coloneqq sx_{0} - f(x_{0}). \tag{7.58}
$$
$$
f(\boldsymbol{y}) = \frac{\lambda}{2}\boldsymbol{y}^{\top}\boldsymbol{K}^{-1}\boldsymbol{y}\tag{7.59}
$$
$$
f^{*}(\boldsymbol{\alpha}) = \sup_{\boldsymbol{y}\in \mathbb{R}^{n}} \left[  \left\langle \boldsymbol{y}, \boldsymbol{\alpha} \right\rangle - \frac{\lambda}{2}\boldsymbol{y}^{\top}\boldsymbol{K}^{-1}\boldsymbol{y} \right]. \tag{7.60} 
$$
$$
\displaystyle \frac{ \partial \left[  \left\langle \boldsymbol{y}, \boldsymbol{\alpha} \right\rangle - \frac{\lambda}{2}\boldsymbol{y}^{\top}\boldsymbol{K}^{-1}\boldsymbol{y} \right] }{ \partial \boldsymbol{y} } = (\boldsymbol{\alpha} - \lambda \boldsymbol{K}^{-1}\boldsymbol{y})^{\top}\tag{7.61}
$$
$$
f^{*}(\boldsymbol{\alpha}) = \frac{1}{\lambda}\boldsymbol{\alpha}^{\top}\boldsymbol{K}^{-1}\boldsymbol{\alpha} - \frac{\lambda}{2}\left( \frac{1}{\lambda}\boldsymbol{K}\boldsymbol{\alpha} \right)^{\top}\boldsymbol{K}^{-1}\left( \frac{1}{\lambda}\boldsymbol{K}\boldsymbol{\alpha} \right) = \frac{1}{2\lambda}\boldsymbol{\alpha}^{\top}\boldsymbol{K}\boldsymbol{\alpha}. \tag{7.62}
$$
$$
\begin{align}
\mathcal{L}^{*}(\boldsymbol{z}) &= \sup_{\boldsymbol{t} \in \mathbb{R}^{n}} \left[ \left\langle \boldsymbol{z}, \boldsymbol{t} \right\rangle - \sum\limits_{i=1}^{n} \ell_{i}(t_{i}) \right] \tag{7.63a}\\
&= \sup_{\boldsymbol{t} \in \mathbb{R}^{n}} \sum\limits_{i=1}^{n}\left[ z_{i}t_{i} - \ell_{i}(t_{i})  \right] & \text{内积定义} \tag{7.63b}\\
&= \sum\limits_{i=1}^{n} \sup_{\boldsymbol{t} \in \mathbb{R}^{n}} [z_{i}t_{i} - \ell_{i}(t_{i})] \tag{7.63c}\\
&= \sum\limits_{i=1}^{n} \ell^{*}_{i}(z_{i}) & \text{共轭定义} \tag{7.63d}
\end{align}
$$
$$
\min\limits_{\boldsymbol{x}}~f(\boldsymbol{A}\boldsymbol{x}) + g(\boldsymbol{x}) = \min\limits_{\boldsymbol{A}\boldsymbol{x} = \boldsymbol{y}}~f(\boldsymbol{y}) + g(\boldsymbol{x}). \tag{7.64}
$$
$$
\begin{align}
\min\limits_{\boldsymbol{A}\boldsymbol{x} = \boldsymbol{y}}~f(\boldsymbol{y}) + g(\boldsymbol{x}) &= \min\limits_{\boldsymbol{x}, \boldsymbol{y}}~\max\limits_{\boldsymbol{u}}~f(\boldsymbol{y}) + g(\boldsymbol{x}) + (\boldsymbol{A}\boldsymbol{x} - \boldsymbol{y})^{\top}\boldsymbol{u} \tag{7.65a}\\
&= \max\limits_{\boldsymbol{u}}~\min\limits_{\boldsymbol{x}, \boldsymbol{y}}~f(\boldsymbol{y}) + g(\boldsymbol{x}) + (\boldsymbol{A}\boldsymbol{x} - \boldsymbol{y})^{\top}\boldsymbol{u} \tag{7.65b}
\end{align}
$$
$$
\begin{align}
&\max\limits_{\boldsymbol{u}}~\min\limits_{\boldsymbol{x}, \boldsymbol{y}}~f(\boldsymbol{y}) + g(\boldsymbol{x}) + (\boldsymbol{A}\boldsymbol{x} - \boldsymbol{y})^{\top}\boldsymbol{u} \tag{7.66a}\\
=&\max\limits_{\boldsymbol{u}}~\Big[ \min\limits_{\boldsymbol{y}}~-\boldsymbol{y}^{\top}\boldsymbol{u} + f(\boldsymbol{y}) \Big] + \Big[ \min\limits_{\boldsymbol{x}}~(\boldsymbol{A}\boldsymbol{x})^{\top}\boldsymbol{u} + g(\boldsymbol{x}) \Big] \tag{7.66b}\\
=& \max\limits_{\boldsymbol{u}}~\Big[ \min\limits_{\boldsymbol{y}}~-\boldsymbol{y}^{\top}\boldsymbol{u} + f(\boldsymbol{y}) \Big] + \Big[ \min\limits_{\boldsymbol{x}}~\boldsymbol{x}^{\top}\boldsymbol{A}^{\top}\boldsymbol{u} + g(\boldsymbol{x}) \Big] \tag{7.66c}\\
\end{align}
$$
$$
\begin{align}
&\max\limits_{\boldsymbol{u}}~\Big[ \min\limits_{\boldsymbol{y}}~-\boldsymbol{y}^{\top}\boldsymbol{u} + f(\boldsymbol{y}) \Big] + \Big[ \min\limits_{\boldsymbol{x}}~\boldsymbol{x}^{\top}\boldsymbol{A}^{\top}\boldsymbol{u} + g(\boldsymbol{x}) \Big] \tag{7.67a}\\
=& \max\limits_{\boldsymbol{u}}~-f^{*}(\boldsymbol{y}) - g^{*}(-\boldsymbol{A}^{\top}\boldsymbol{u}). \tag{7.67b}
\end{align}
$$
$$
\min\limits_{\boldsymbol{x}}~f(\boldsymbol{A}\boldsymbol{x}) + g(\boldsymbol{x}) = \max\limits_{\boldsymbol{u}}~-f^{*}(\boldsymbol{u}) - g^{*}(-\boldsymbol{A}^{\top}\boldsymbol{u}). \tag{7.68}
$$
